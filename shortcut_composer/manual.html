<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Shortcut Composer</title>
</head>

<body>

    <h1 id="shortcut-composer">Shortcut composer</h1>
    <p><strong>Extension</strong> for painting application <strong>Krita</strong>, which allows to create custom,
        complex
        <strong>keyboard shortcuts</strong>.
    </p>
    <p>The plugin adds new shortcuts of the following types:</p>
    <ul>
        <li><code>Pie menu</code> - while key is pressed, displays a pie menu, which allows to pick values by hovering a
            mouse.</li>
        <li><code>Cursor tracker</code> - while key is pressed, tracks a cursor, switching values according to cursor
            offset.</li>
        <li><code>Canvas preview</code> - Temporarily changes canvas elements while the key is pressed.</li>
        <li><code>Multiple assignment</code> - repeatedly pressing a key, cycles between multiple values of krita
            property.
        </li>
        <li><code>Temporary key</code> - temporarily activates a krita property with long press or toggles it on/off
            with
            short press.</li>
    </ul>
    <h2 id="what-s-new-in-1-2-">What&#39;s new in <strong>1.2</strong></h2>
    <ul>
        <li>[hotfix **1.2.1**] - Fixed pie menus in edit mode hiding when clicked outside on the canvas.</li>
    </ul>
    <h3 id="added">Added</h3>
    <ul>
        <li>Adding and removing PieMenu icons with drag and drop.</li>
        <li>Class-oriented configuration system with automatic value parsing. Can be reused in other plugins. </li>
        <li>PieMenus are now able to handle their own local configuration with Pie settings (Replaces section in
            <code>Configure Shortcut Composer</code>).
        </li>
        <li>Change PieIcon border&#39;s color when hovered in EditMode (Replaces gray indicator)</li>
        <li>Allow changes to PieMenu and PieIcon size for each pie separately.</li>
        <li>Separate button to enter PieMenu edit mode. Replaces clicking on PieIcon which was easy to do
            unintentionally.
        </li>
        <li>Preset PieMenus tag now can be chosen directly from the Pie settings. (Replaces section in
            <code>Configure Shortcut Composer</code>)
        </li>
        <li>Preset PieMenus now reload automatically when the tag content changes. (Replaces
            <code>Reload Shortcut Composer</code> action)
        </li>
        <li>PieMenus now automatically change between dark/light theme when the krita theme changes between these two
            theme
            families.</li>
        <li><code>Cycle selection tools</code> action now is configured by local settings activated with a button that
            appears on long press (Replaces section in <code>Configure Shortcut Composer</code>)</li>
    </ul>
    <h3 id="fixed">Fixed</h3>
    <ul>
        <li>Support tags with quote and double-quote signs.</li>
        <li>Make <code>input_adapter</code> package independent from the rest of the plugin to improve re-usability.
        </li>
        <li>Fix crash when picking a deleted preset with PieMenu.</li>
    </ul>
    <p>Check out historic <a href="https://github.com/wojtryb/Shortcut-Composer/wiki/Change-log">changelogs</a>.</p>
    <h2 id="requirements">Requirements</h2>
    <ul>
        <li>Version of krita on plugin release: <strong>5.1.5</strong></li>
        <li>Required version of krita: <strong>5.1.0</strong></li>
    </ul>
    <p>OS support state:</p>
    <ul>
        <li>[x] Windows (10, 11)</li>
        <li>[x] Linux (Ubuntu 20.04, 22.04)</li>
        <li>[ ] MacOS (Known bug of canvas losing focus after using PieMenu)</li>
        <li>[ ] Android (Does not support python plugins yet)</li>
    </ul>
    <h2 id="how-to-install-or-update-the-plugin-">How to install or update the plugin:</h2>
    <ol>
        <li>on <a href="https://github.com/wojtryb/Shortcut-Composer">github project page</a>, click the green button
            <kbd>code</kbd> and pick the <kbd>download zip</kbd> option. Do not extract it.
        </li>
        <li>in krita&#39;s topbar, open <strong>Tools &gt; Scripts &gt; Import Python Plugin From File</strong> and pick
            the
            downloaded .zip file</li>
        <li>restart krita.</li>
        <li>set custom shortcuts in <strong>Settings &gt; Configure Krita &gt; Keyboard Shortcuts</strong> under
            <strong>Scripts &gt; Shortcut Composer: Complex Actions</strong> section. By intention, there are no default
            bindings.
        </li>
    </ol>
    <h2 id="pre-made-actions">Pre-made actions</h2>
    <p>While Shortcut-Composer is highly configurable and extendable, the add-on comes with pre-made, plug-and-play
        actions.
    </p>
    <h3 id="-pie-menus-">(<code>Pie menus</code>):</h3>
    <p>Pie menu is a widget displayed on the canvas while a key is pressed. It will disappear as soon, as the key is
        released. Moving cursor in a direction of an icon, activates its value on key release. <strong>The action only
            requires hovering</strong>. Pie menu does nothing if the cursor is not moved out of the deadzone.</p>
    <p>Clicking the settings button in bottom-right corner switches into <code>Edit mode</code> which allows to modify
        pie.
        At this point the keyboard button no longer needs to be pressed. In this mode values one can:</p>
    <ul>
        <li>drag icons to change their order</li>
        <li>drag icons out of the ring to remove them</li>
        <li>drag icons from the settings window to add them</li>
    </ul>
    <p>Settings window visible in <code>Edit mode</code> also allows to change the local settings of the pie. When done,
        press the tick button to apply the changes. </p>
    <ul>
        <li>
            <h3 id="pick-brush-presets-red-green-blue-">Pick brush presets (red, green, blue)</h3>
            <p>Three color coded pie menus that let you pick a <strong>brush preset</strong> from related
                <strong>tag</strong> with brush presets.
            </p>
            <p>Used tag can be changed in pie settings by entering <code>Edit mode</code>. Presets in the pie depend on
                the
                tag, so they cannot be removed or added with dragging, but it is possible to change their order. When
                presets are added or remove from the tag, pie should update automatically.</p>
            <p>Default tag mapping is as follows:</p>
            <ul>
                <li><span style="color:red">red</span>: &quot;â˜… My Favorites&quot;</li>
                <li><span style="color:green">green</span>: &quot;RGBA&quot;</li>
                <li><span style="color:blue">blue</span>: &quot;Erasers&quot;</li>
            </ul>
        </li>
        <li>
            <h3 id="pick-misc-tools">Pick misc tools</h3>
            <p>Pie menu for picking <strong>active tools</strong>. It is recommended to change the default values being:
            </p>
            <ul>
                <li>crop tool,</li>
                <li>reference tool,</li>
                <li>gradient tool,</li>
                <li>multi_brush tool,</li>
                <li>assistant tool</li>
            </ul>
        </li>
        <li>
            <h3 id="pick-painting-blending-modes">Pick painting blending modes</h3>
            <p>Pie menu for picking <strong>painting blending modes</strong>. It is recommended to change the default
                values
                being:</p>
            <ul>
                <li>normal</li>
                <li>overlay,</li>
                <li>color,</li>
                <li>multiply,</li>
                <li>add,</li>
                <li>screen,</li>
                <li>darken,</li>
                <li>lighten</li>
            </ul>
        </li>
        <li>
            <h3 id="create-painting-layer-with-blending-mode">Create painting layer with blending mode</h3>
            <p>Pie menu for creating a new layer with picked <strong>blending mode</strong>. It is recommended to change
                the
                default values being:</p>
            <ul>
                <li>normal</li>
                <li>erase</li>
                <li>overlay,</li>
                <li>color,</li>
                <li>multiply,</li>
                <li>add,</li>
                <li>screen,</li>
                <li>darken,</li>
                <li>lighten</li>
            </ul>
        </li>
    </ul>
    <h3 id="-cursor-trackers-">(<code>Cursor trackers</code>):</h3>
    <p>Cursor tracker is an action for switching values using cursor movement, while the keyboard key is pressed. It
        changes
        a single krita property according to the cursor movement along horizontal or vertical axis. <strong>The action
            does
            not recognise mouse clicks, and only requires hovering</strong></p>
    <ul>
        <li>
            <h3 id="scroll-isolated-layers">Scroll isolated layers</h3>
            <p>Scrolls the layers by sliding the cursor vertically. Can be used for picking the active layer and
                analizing
                the layer stack. While the key is pressed, isolates the active layer to give better response of which
                layer
                is active.</p>
            <ul>
                <li>Key press: isloate active layer</li>
                <li>Horizontal: -</li>
                <li>Vertical: scroll all layers</li>
            </ul>
        </li>
        <li>
            <h3 id="scroll-timeline-or-animated-layers">Scroll timeline or animated layers</h3>
            <p>Variation on &quot;Scroll isolated layers&quot; for animators. Scrolling is restricted only to layers
                pinned
                to the animation timeline. Horizontal mouse movement changes the current frame.</p>
            <ul>
                <li>Key press: isloate active layer</li>
                <li>Horizontal: scroll animation frames</li>
                <li>Vertical: scroll layers pinned to timeline</li>
            </ul>
        </li>
        <li>
            <h3 id="scroll-undo-stack">Scroll undo stack</h3>
            <p>Extends the krita undo action <kbd>ctrl</kbd>+<kbd>z</kbd>. While the key is pressed, horizontal mouse
                movement controls the undo stack by performing undo and redo actions. Usual undo with short key press is
                still possible.</p>
            <ul>
                <li>Key press: undo last operation</li>
                <li>Horizontal: scroll left to undo, or right to redo</li>
                <li>Vertical: -</li>
            </ul>
        </li>
        <li>
            <h3 id="scroll-brush-size-or-opacity">Scroll brush size or opacity</h3>
            <p>Allows to control both <code>brush size</code> or <code>opacity</code> with a single key. Opacity changes
                contiguously with vertical mouse movement, while brush size snaps to custom values.</p>
            <ul>
                <li>Key press: -</li>
                <li>Horizontal: scroll brush size (descrete)</li>
                <li>Vertical: scroll painting opacity (contiguous)</li>
            </ul>
        </li>
        <li>
            <h3 id="scroll-canvas-zoom-or-rotation">Scroll canvas zoom or rotation</h3>
            <p>Allows to control both <code>canvas zoom</code> or <code>canvas rotation</code> with a single key. Does
                not
                block the ability to paint.</p>
            <ul>
                <li>Key press: -</li>
                <li>Horizontal: canvas rotation (contiguous)</li>
                <li>Vertical: canvas zoom (contiguous)</li>
            </ul>
        </li>
    </ul>
    <h3 id="-canvas-previews-">(<code>Canvas previews</code>):</h3>
    <p>Canvas preview is an action which changes canvas elements when the key is pressed, and changes them back to their
        original state on key release.</p>
    <ul>
        <li>
            <h3 id="preview-current-layer-visibility">Preview current layer visibility</h3>
            <p>Changes active layer visibility on key press and release. Allows to quickly check layer&#39;s content.
            </p>
        </li>
        <li>
            <h3 id="preview-projection-below">Preview projection below</h3>
            <p>Hides all visible layers above the active one on key press, and reverses this change on key release.
                Allows
                to check what is the position of current layer in a stack. It is possible to paint while action is
                active.
            </p>
        </li>
    </ul>
    <h3 id="-multiple-assignments-">(<code>Multiple assignments</code>):</h3>
    <p>Multiple assignment is an action which cycles between multiple values of single krita property. Each key press
        activates next list element. Performing a long press breaks the cycle and sets a default value, which does not
        have
        to belong the the list.</p>
    <ul>
        <li>
            <h3 id="cycle-selection-tools">Cycle selection tools</h3>
            <p>Pressing a key repeatedly cycles most commonly used selection tools:</p>
            <ul>
                <li>freehand selection tool,</li>
                <li>rectangular selection tool,</li>
                <li>contiguous selection tool</li>
            </ul>
            <p>Performing a long press, goes back to the <code>freehand brush tool</code>. Tools can be used while the
                key
                is pressed.</p>
            <p>Default values can be modified in <code>Edit mode</code>. To enter it, long press the button, and click
                on
                the button which appears in top-left corner of painting area.</p>
            <p>Values are added by selecting the list value(s) on the left and pressing the green <strong>add</strong>
                button. Analogically, selecting values on the right, and pressing the <strong>remove</strong> button,
                removes the values from action. Dragging values on the right, allow to change their order.</p>
        </li>
        <li>
            <h3 id="cycle-painting-opacity">Cycle painting opacity</h3>
            <p>Pressing a key repeatedly cycles brush predefined opacity values: <code>100%</code>, <code>70%</code>,
                <code>50%</code>, <code>30%</code>
            </p>
            <p>Performing a long press, goes back to the <code>100%</code> opacity. Modified opacity can be used while
                the
                key is pressed.</p>
            <p>Currently does not allow to configure predefined values without editing code.</p>
        </li>
    </ul>
    <h3 id="-temporary-keys-">(<code>Temporary keys</code>):</h3>
    <ul>
        <li>
            <h3 id="temporary-move-tool">Temporary move tool</h3>
            <p>Pressing a key temporarily activates the <code>move tool</code> which goes back to the
                <code>freehand brush tool</code> after the key release. Short key presses allow to permanently toggle
                between those two tools.
            </p>
        </li>
        <li>
            <h3 id="temporary-eraser">Temporary eraser</h3>
            <p>Pressing a key temporarily activates the <code>eraser</code> mode which gets turned off after the key is
                released. Short key presses allow to permanently toggle between those two states. </p>
        </li>
        <li>
            <h3 id="temporary-preserve-alpha">Temporary preserve alpha</h3>
            <p>Pressing a key temporarily activates the <code>preserve alpha</code> mode which gets turned off after the
                key
                is released. Short key presses allow to permanently toggle between those two states. </p>
        </li>
    </ul>
    <h2 id="modifying-default-plugin-behaviour">Modifying default plugin behaviour</h2>
    <h3 id="tweaking-the-global-parameters">Tweaking the global parameters</h3>
    <p>Shortcut-Composer comes with a settings dialog available from krita topbar: <strong>Tools &gt; Scripts &gt;
            Configure
            Shortcut Composer</strong>. The dialog allows to change the following aspects of actions:</p>
    <ul>
        <li>Common settings<ul>
                <li><code>Short vs long press time</code> - Time in seconds distinguishing short key presses from long
                    ones.
                </li>
                <li><code>FPS limit</code> - Maximum rate of Mouse Tracker and Pie Menu refresh.</li>
            </ul>
        </li>
        <li>Cursor trackers<ul>
                <li><code>Tracker sensitivity scale</code> - Sensitivity multiplier of all Mouse Trackers. </li>
                <li><code>Tracker deadzone</code> - Amount of pixels a mouse needs to moved for Mouse Trackers to start
                    work.</li>
            </ul>
        </li>
        <li>Pie menus display<ul>
                <li><code>Pie global scale</code> - Global scale factor for base of every pie menu.</li>
                <li><code>Pie icon global scale</code> - Global scale factor for icons of every pie menu.</li>
                <li><code>Pie deadzone global scale</code> - Global scale factor for the deadzone area of every pie
                    menu.
                </li>
                <li><code>Pie animation time</code> - Time (in seconds) for fade-in animation when showing the pie menu.
                </li>
            </ul>
        </li>
    </ul>
    <h3 id="modifying-actions-and-creating-custom-ones">Modifying actions and creating custom ones</h3>
    <p>While the settings dialog allows to tweak the values common for plugin actions, it does not allow to modify the
        behaviour of the actions or create new ones.</p>
    <p>To achieve that it is required to modify actions implementation: </p>
    <ul>
        <li>in krita&#39;s topbar, open <strong>Settings &gt; Manage Resources &gt; Open Resource Folder</strong></li>
        <li>navigate to <strong>./pykrita/shortcut_composer/</strong> directory.</li>
        <li>action definitions are located in <code>actions.action</code> file.</li>
        <li>
            <p>actions implementation is located in <code>actions.py</code> file.</p>
        </li>
        <li>
            <p>Define an action in <code>actions.action</code> file by duplicating one of the existing definitions and
                using
                an unique name for it.</p>
        </li>
        <li>Implement an action in <code>actions.py</code> file. Once again, duplicate one of the existing
            implementations.
            It is best to pick the one that feels closest to desired action. Fill its arguments, making sure the name is
            exactly the same as defined earlier.</li>
    </ul>
    <h2 id="worth-noting">Worth noting</h2>
    <ul>
        <li>Key bindings with modifiers like <kbd>ctrl</kbd> or <kbd>shift</kbd> are supported. When assigned to a key
            combination, the key is considered released when the main key in sequence (non-modifier) is released.</li>
        <li>Multiple shortcuts from this plugin can be used at the same time, unless bindings make it technically
            impossible. For example holding both keys for <code>Temporary eraser</code> and
            <code>Cycle painting opacity</code> result in an eraser with 70% opacity.
        </li>
    </ul>
    <h3 id="known-limitations">Known limitations</h3>
    <ul>
        <li>Pressing a modifier while the usual key is pressed, will result in conflict. For instance, pressing
            <kbd>ctrl</kbd> while using temporary eraser assigned to <kbd>x</kbd> will result in unwanted
            <kbd>ctrl</kbd>+<kbd>x</kbd> operation which cuts current layer.
        </li>
        <li>It is possible to activate multiple pie menus at the same time.</li>
        <li>Keyboard shortcuts assigned to actions can conflict with Canvas Input (General limitation of Krita).</li>
    </ul>
    <h2 id="for-krita-plugin-programmers">For krita plugin programmers</h2>
    <p>Some parts of plugin code solve general problems, which can apply outside of Shortcut Composer. Those solutions
        were
        placed in separate packages that can be copy-pasted into any other plugin and reused there.</p>
    <p>They depend only on original Krita API and PyQt5 with which krita is shipped.</p>
    <h3 id="custom-keyboard-shortcut-interface">Custom keyboard shortcut interface</h3>
    <p>Package <code>input_adapter</code> consists of <code>ActionManager</code> and <code>ComplexActionInterface</code>
        which together allow to recognise more keyboard events than usual krita action does.</p>
    <p>While usual actions can only recognise key press, implementing <code>ComplexActionInterface</code> lets you
        override
        methods performed on:</p>
    <ul>
        <li>key press</li>
        <li>short key release</li>
        <li>long key release</li>
        <li>every key release</li>
    </ul>
    <p>Each action needs to have public <code>name: str</code> attribute which is the same, as the one used in .action
        file,
        as well as <code>short_vs_long_press_time: float</code> which determines how many seconds need to elapse to
        consider
        that a key press was long.</p>
    <p>Use <code>ActionManager</code> instance to bind objects of those custom actions to krita during
        <code>CreateActions</code> phase:
    </p>
    <pre><code class="lang-python"><span class="hljs-string">"""
Print whether action key was released before of after
0.2 seconds from being pressed.
"""</span>
<span class="hljs-keyword">from</span> krita <span class="hljs-keyword">import</span> Krita
<span class="hljs-keyword">from</span> input_adapter <span class="hljs-keyword">import</span> ActionManager, ComplexActionInterface


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomAction</span><span class="hljs-params">(ComplexActionInterface)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, name: str, press_time: float = <span class="hljs-number">0.2</span>)</span>:</span>
      self.name = name
      self.short_vs_long_press_time = press_time

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_key_press</span><span class="hljs-params">(self)</span>:</span> print(<span class="hljs-string">"key was pressed"</span>)
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_short_key_release</span><span class="hljs-params">(self)</span>:</span> print(<span class="hljs-string">"key released before than 0.2s"</span>)
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_long_key_release</span><span class="hljs-params">(self)</span>:</span> print(<span class="hljs-string">"key released later than after 0.2s"</span>)
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_every_key_release</span><span class="hljs-params">(self)</span>:</span> <span class="hljs-keyword">pass</span>


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyExtension</span><span class="hljs-params">(Extension)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setup</span><span class="hljs-params">(self)</span> -&gt; <span class="hljs-keyword">None</span>:</span> <span class="hljs-keyword">pass</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createActions</span><span class="hljs-params">(self, window)</span> -&gt; <span class="hljs-keyword">None</span>:</span>
        action = CustomAction(name=<span class="hljs-string">"Custom action name"</span>)
        self.manager = ActionManager(window)
        self.manager.bind_action(action)

Krita.instance().addExtension(MyExtension(Krita.instance()))
</code></pre>
    <h3 id="config-system">Config system</h3>
    <p>Package <code>config_system</code> consists of <code>Field</code> and <code>FieldGroup</code> which grant
        object-oriented API to control kritarc configuration file easier, than with API of krita.</p>
    <hr>
    <p><code>Field</code> represents a single value in kritarc file. Once initialized with its group name, name and
        default
        value, it allows to:</p>
    <ul>
        <li>write a given value to kritarc.</li>
        <li>read current value from kritarc, parsing it to correct python type.</li>
        <li>reset the value to default.</li>
        <li>register a callback run on each value change.</li>
    </ul>
    <p>Type of default value passed on initlization is remembered, and used to parse values both on read and write.
        Supported types are:</p>
    <ul>
        <li><code>int</code>, <code>list[int]</code>,</li>
        <li><code>float</code>, <code>list[float]</code>,</li>
        <li><code>str</code>, <code>list[str]</code>,</li>
        <li><code>bool</code>, <code>list[bool]</code>,</li>
        <li><code>Enum</code>, <code>list[Enum]</code></li>
    </ul>
    <p>For empty, homogeneous lists, <code>parser_type</code> argument must be used to determine type of list elements.
        Default values are not saved when until the field does not exist in kritarc. Repeated saves of the same value
        are
        filtered, so that callbacks are not called when the same value is written multiple times one after the other.
    </p>
    <hr>
    <p><code>FieldGroup</code> represents a section of fields in kritarc file. It simplifies the field creation by
        auto-completing the group name.</p>
    <p>FieldGroup holds and aggregates fields created with it. It allows to reset all the fields at once, and register a
        callback to all its fields: both existing and future ones.</p>
    <hr>
    <p>Example usage:</p>
    <pre><code class="lang-python"><span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum
<span class="hljs-keyword">from</span> config_system <span class="hljs-keyword">import</span> FieldGroup


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EnumMock</span><span class="hljs-params">(Enum)</span>:</span>
    MODE_A = <span class="hljs-number">0</span>
    MODE_B = <span class="hljs-number">1</span>

<span class="hljs-comment"># Create a config group</span>
group = FieldGroup(<span class="hljs-string">"MyGroup"</span>)
<span class="hljs-comment"># Register a callback on all three fields</span>
group.register_callback(<span class="hljs-keyword">lambda</span>: print(<span class="hljs-string">"any field changed"</span>))

<span class="hljs-comment"># Create three fields inside a group - for string and two enum lists</span>
str_field = group.field(name=<span class="hljs-string">"my_str"</span>, default=<span class="hljs-string">"Sketch"</span>)
enums_field_1 = group.field(<span class="hljs-string">"my_enums_1"</span>, [], parser_type=EnumMock)
enums_field_2 = group.field(<span class="hljs-string">"my_enums_2"</span>, [EnumMock.MODE_A])

<span class="hljs-comment"># Register a different callback on each field</span>
str_field.register_callback(<span class="hljs-keyword">lambda</span>: print(<span class="hljs-string">"string changed"</span>))
enums_field_1.register_callback(<span class="hljs-keyword">lambda</span>: print(<span class="hljs-string">"enum 1 changed"</span>))
enums_field_2.register_callback(<span class="hljs-keyword">lambda</span>: print(<span class="hljs-string">"enum 2 changed"</span>))

<span class="hljs-comment"># Change the value from default "Sketch" to "Digital"</span>
str_field.write(<span class="hljs-string">"Digital"</span>)
<span class="hljs-comment"># Change the value from empty list to one with two values</span>
enums_field_1.write([EnumMock.MODE_A, EnumMock.MODE_B])
<span class="hljs-comment"># Repeat the default value. Will be filtered</span>
enums_field_2.write([EnumMock.MODE_A])

<span class="hljs-comment"># The program will not break, as red values are the same as written ones</span>
<span class="hljs-keyword">assert</span> str_field.read() == <span class="hljs-string">"Digital"</span>
<span class="hljs-keyword">assert</span> enums_field_1.read() == [EnumMock.MODE_A, EnumMock.MODE_B]
<span class="hljs-keyword">assert</span> enums_field_2.read() == [EnumMock.MODE_A]
</code></pre>
    <p>The code above produces &quot;MyGroup&quot; section in kritarc file. my_enums_2 is missing, as the default value
        was
        not changed:</p>
    <pre><code class="lang-toml"><span class="hljs-section">[MyGroup]</span>
<span class="hljs-attr">my_str</span>=Digital
<span class="hljs-attr">my_enums_1</span>=MODE_A\tMODE_B
</code></pre>
    <p>Registered callbacks outputs on the terminal:</p>
    <pre><code>any field changed
string changed
any field changed
<span class="hljs-class"><span class="hljs-keyword">enum</span> 1 <span class="hljs-title">changed</span></span>
</code></pre>
    <p>Calling <code>group.reset_defaults()</code> would change both values back to their defaults, and produce the same
        output on the terminal, as resetting changes the fields.</p>
    <h3 id="alternative-api">Alternative API</h3>
    <p>Package <code>api_krita</code> wraps krita api offering PEP8 compatibility, typings, and docstring documentation.
        Most of objects attributes are now available as settables properties.</p>
    <pre><code class="lang-python">from .api_krita <span class="hljs-built_in">import</span> Krita
from .api_krita.enums <span class="hljs-built_in">import</span> BlendingMode, Tool, Toggle

<span class="hljs-comment"># active tool operations</span>
<span class="hljs-attr">tool</span> = Krita.active_tool  <span class="hljs-comment"># get current tool</span>
Krita.<span class="hljs-attr">active_tool</span> = Tool.FREEHAND_BRUSH  <span class="hljs-comment"># set current tool</span>
Tool.FREEHAND_BRUSH.activate()  <span class="hljs-comment"># set current tool (alternative way)</span>

<span class="hljs-comment"># operations on a document</span>
<span class="hljs-attr">document</span> = Krita.get_active_document()
<span class="hljs-attr">all_nodes</span> = document.get_all_nodes()  <span class="hljs-comment"># all nodes with flattened structure</span>
<span class="hljs-attr">picked_node</span> = all_nodes[<span class="hljs-number">3</span>]

picked_node.<span class="hljs-attr">name</span> = <span class="hljs-string">"My layer name"</span>
picked_node.<span class="hljs-attr">visible</span> = True
picked_node.<span class="hljs-attr">opacity</span> = <span class="hljs-number">50</span>  <span class="hljs-comment"># remapped from 0-255 go 0-100 [%]</span>
document.<span class="hljs-attr">active_node</span> = picked_node 
document.refresh()

<span class="hljs-comment"># Operations on a view</span>
<span class="hljs-attr">view</span> = Krita.get_active_view()
view.<span class="hljs-attr">brush_size</span> = <span class="hljs-number">100</span>
view.<span class="hljs-attr">blending_mode</span> = BlendingMode.NORMAL  <span class="hljs-comment"># Enumerated blending modes</span>

<span class="hljs-comment"># Handling checkable actions</span>
<span class="hljs-attr">mirror_state</span> = Toggle.MIRROR_CANVAS.state  <span class="hljs-comment"># get mirror state</span>
Toggle.SOFT_PROOFING.<span class="hljs-attr">state</span> = False  <span class="hljs-comment"># turn off soft proofing</span>
Toggle.PRESERVE_ALPHA.switch_state()  <span class="hljs-comment"># change state of preserve alpha</span>
</code></pre>
    <p>Only functionalities that were needed during this plugin development are wrapped, so some of them are not yet
        available. The syntax can also change over time.</p>

</body>

</html>